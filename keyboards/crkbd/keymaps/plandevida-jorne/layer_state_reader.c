
#include QMK_KEYBOARD_H
#include <stdio.h>

enum layer_number { _QWERTY = 0, _HOMEMOD, _HOMEMODMAC, _VALORANT, _GAMING, _NUMBERS, _MOUSE, _CONFIG };

char        layer_state_str[24];
const char *logo;
int         logo_size;

void choose_gaming_controller_logo(void) {
    // clang-format off
    static const char PROGMEM gaming_controller_logo[] = {
        // 0x0,0x80, 0xf0, 0xfc, 0xfe, 0xee, 0xc7, 0x6f, 0x3f, 0x3f, 0x6f, 0xf9, 0xf9, 0xef, 0x7f, 0x3f, 0x6f,
        // 0xd7, 0xee, 0xfe, 0xfc, 0xf0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x78,
        // 0xff, 0xff, 0xff, 0x7f, 0x1f, 0x0f, 0x0e, 0x0c, 0x0c, 0x0e, 0x0f, 0x0f, 0x0f, 0x0f, 0x0e, 0x0f,
        // 0x0f, 0x1f, 0x7f, 0xff, 0xff, 0xff, 0x78, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00,
        // 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        // 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        // 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        // 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    };
    // static const char PROGMEM gaming_controller_logo[] = {
    //     0x0,0x80, 0xf0, 0xfc, 0xfe, 0xee, 0xc7, 0x6f, 0x3f, 0x3f, 0x6f, 0xf9, 0xf9, 0xef, 0x7f, 0x3f,
    //     0x6f,0xd7, 0xee, 0xfe, 0xfc, 0xf0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    //     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    //     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    //     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    //     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    //     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    //     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    //     0x78, 0xff, 0xff, 0xff, 0x7f, 0x1f, 0x0f, 0x0e, 0x0c, 0x0c, 0x0e, 0x0f, 0x0f, 0x0f, 0x0f, 0x0e,
    //     0x0f, 0x0f, 0x1f, 0x7f, 0xff, 0xff, 0xff, 0x78, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00,
    //     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    //     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    //     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    //     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    //     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    //     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    // };
    // clang-format on
    logo      = gaming_controller_logo;
    logo_size = 56;
    // logo_size = 153;
}

const char *read_layer_name(int layer) {
    switch (layer) {
        case _QWERTY:
            snprintf(layer_state_str, sizeof(layer_state_str), "QWRTY");
            break;
        case _HOMEMOD:
            snprintf(layer_state_str, sizeof(layer_state_str), "HMMOD");
            break;
        case _HOMEMODMAC:
            snprintf(layer_state_str, sizeof(layer_state_str), "HMMAC");
            break;
        case _VALORANT:
            snprintf(layer_state_str, sizeof(layer_state_str), "VLRNT");
            choose_gaming_controller_logo();
            break;
        case _GAMING:
            snprintf(layer_state_str, sizeof(layer_state_str), "GM'NG");
            choose_gaming_controller_logo();
            break;
        case _NUMBERS:
            snprintf(layer_state_str, sizeof(layer_state_str), "NMBRS");
            break;
        case _MOUSE:
            snprintf(layer_state_str, sizeof(layer_state_str), "MOUSE");
            break;
        case _CONFIG:
            snprintf(layer_state_str, sizeof(layer_state_str), "CONFG");
            break;
        default:
            snprintf(layer_state_str, sizeof(layer_state_str), "UNDEF%d", layer);
    }

    return layer_state_str;
}

const char *read_layer_state(void) { return read_layer_name(get_highest_layer(layer_state)); }

void render_layer_state(void) {
    read_layer_name(get_highest_layer(layer_state));

    oled_write(layer_state_str, false);
    oled_advance_char();
    oled_write_raw_P(logo, logo_size);
}
